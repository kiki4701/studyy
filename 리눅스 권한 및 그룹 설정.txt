리눅스 권한 및 그룹 설정

- 소유권(Ownership)과 관련 명령어

chown
명령어 chown는 파일과 디렉터리의 사용자 소유권과 그룹 소유권을 변경한다.
#chown [옵션] 소유자[:그룹명] 파일명

chgrp
명령어 chgrp는 change group을 줄인 명령어로 파일이나 디렉터리의 그룹 소유권을 변경한다.
명령어 chown은 소유자와 소유 그룹을 모두 변경할 수 있지만 chgrp는 그룹 소유권만을 변경한다.
#chgrp [옵션] 그룹명 파일명

- 허가권(permission)과 관련 명령어

chmod
파일이나 디렉터리의 접근 허가권을 변경하는 명령어이다.
#chmod [옵션] 파일명
권한 변경은 '숫자 모드' 또는 '기호 모드'가 있다.

umask
명령어 umask는 새로 생성되는 파일이나 디렉터리의 기본 허가권 값을 저장한다.
파일의 기본 권한은 666, 디렉터리의 기본 권한은 777이다. 명령어 umask는 디폴트 권한 값을 변경한다.
파일이나 디렉터리 생성시 디폴트 권한 값에서 설정한 umask값을 뺀 값을 기본 허가권으로 설정한다. 예를 들어, umask가 022인 경우 디폴트 파일 권한은 644(666-022), 디폴트 디렉터리 권한은 755(777-022)으로 변경된다.
umask -S는 umask값을 문자로 나타낸다

- 특수 권한

SetUID
사용자가 사용할 때만 소유자 권한으로 파일을 실행한다. 프로그램을 실행하는 동안 프로세스는 파일의 소유자와 같은 권한으로 실행된다.

SetGID
사용자가 사용할 때만 그룹 권한으로 파일을 실행한다. 프로그램을 실행하는 동안 프로세스는 파일의 그룹과 같은 권한으로 실행된다.
SetGID 권한이 명시된 디렉터리에 생성되는 모든 하위 디렉터리나 파일도 SetGID 권한을 가진다.

SetUID 소문자 's'와 대문자 'S'
실행 파일에 setuid를 설정하면 소문자 's'가 되고 정상적으로 실행할 수 있다.
실행 파일이 아닌데 setuid를 설정하면 대문자 'S'가 되고 실행할 수 없다.

Sticky bit
1. 일반적으로 공용 디렉터리를 사용할 때 sticky bit를 설정하여 사용한다.
2. sticky bit가 설정되어 있는 디렉터리 안의 내용은 해당 파일의 소유자나 root만이 변경이 가능하게 하여 공용 디렉터리라도 권한에 제약을 두어 다른 사용자들의 파일을 보호하기 위한 목적으로 만든 것이다.
3. 사용자 권한을 지정하기 어려운 프로그램들이 일시적으로 특정 디렉터리에 파일을 생성하고 삭제하도록 이용된다. 
4. 특정 응용 프로그램이 다른 응용 프로그램에서 생성한 파일을 삭제하지 못하는 권한 설정을 한다.
5. 설정된 디렉터리에는 누구든 접근 가능하고 파일을 생성할 수 있다.
6. 생성된 sticky bit 파일을 삭제 시에는 소유자(파일 생성자)와 관리자만 지울 수 있다. 다른 사용자는 자신의 소유가 아닌 파일을 삭제할 수 없다.
7. 일반적으로 sticky bit로 설정되는 디렉터리는 /tmp 안에 생성한다.

- 디스크 쿼터(Disk Quota)
1. 파일 시스템마다 사용자나 그룹이 생성할 수 있는 파일의 용량 및 개수를 제한하는 것이다.
2. 사용자나 그룹이 가질 수 있는 inode의 수, 사용자나 그룹에게 할당된 디스크 블록 수를 제한한다.
3. 쿼터는 사용자별, 파일 시스템별로 동작된다.
4. 그룹 단위로도 용량을 제한할 수 있으며 웹호스팅 서비스를 하는 경우에 유용한다.


